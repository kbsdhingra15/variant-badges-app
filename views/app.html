<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Variant Badges</title>
    <script src="https://cdn.shopify.com/shopifycloud/app-bridge.js"></script>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          sans-serif;
        background: #f6f6f7;
        padding: 40px;
      }

      .page {
        display: none;
        max-width: 1200px;
        margin: 0 auto;
      }

      .page.active {
        display: block;
      }

      .page-title {
        font-size: 24px;
        font-weight: 600;
        color: #202223;
        margin-bottom: 10px;
      }

      .page-subtitle {
        font-size: 14px;
        color: #6d7175;
        margin-bottom: 30px;
      }
    </style>
  </head>
  <body>
    <!-- Main Page -->
    <div class="page active" id="main-page">
      <h1 class="page-title">Variant Badges</h1>
      <p class="page-subtitle">Assign HOT and NEW badges to product variants</p>
      <p>Main page content will go here...</p>
    </div>

    <!-- Plans Page -->
    <div class="page" id="plans-page">
      <h1 class="page-title">Plans</h1>
      <p class="page-subtitle">
        Choose the plan that works best for your business
      </p>
      <p>Plans content will go here...</p>
    </div>

    <!-- Settings Page -->
    <div class="page" id="settings-page">
      <h1 class="page-title">Settings</h1>
      <p class="page-subtitle">Configure your badge display preferences</p>
      <p>Settings content will go here...</p>
    </div>

    <!-- Help Page -->
    <div class="page" id="help-page">
      <h1 class="page-title">Help</h1>
      <p class="page-subtitle">Find answers to common questions</p>
      <p>Help content will go here...</p>
    </div>

    <script>
      const shopifyConfig = {
        apiKey: "{{SHOPIFY_API_KEY}}",
        host: new URLSearchParams(window.location.search).get("host"),
      };

      // Initialize App Bridge
      const AppBridge = window["app-bridge"];
      const createApp = AppBridge.default;
      const { NavigationMenu } = AppBridge.actions;

      const app = createApp(shopifyConfig);

      // Create navigation menu in Shopify's left sidebar
      const navigationMenu = NavigationMenu.create(app, {
        items: [
          {
            label: "Variant Badges",
            destination: "/app?page=main",
          },
          {
            label: "Plans",
            destination: "/app?page=plans",
          },
          {
            label: "Settings",
            destination: "/app?page=settings",
          },
          {
            label: "Help",
            destination: "/app?page=help",
          },
        ],
      });

      // Handle page routing based on URL parameter
      const urlParams = new URLSearchParams(window.location.search);
      const currentPage = urlParams.get("page") || "main";

      // Show the correct page
      document
        .querySelectorAll(".page")
        .forEach((p) => p.classList.remove("active"));
      const pageToShow = document.getElementById(currentPage + "-page");
      if (pageToShow) {
        pageToShow.classList.add("active");
      }
    </script>
  </body>
</html>
