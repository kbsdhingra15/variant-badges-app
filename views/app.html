<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Variant Badges</title>
    <style>
      /* Custom Modal Styles */
.modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.5);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 10000;
}

.modal-overlay.active {
  display: flex;
}

.modal-content {
  background: white;
  border-radius: 8px;
  padding: 24px;
  max-width: 700px;
  width: 90%;
  max-height: 90vh; /* ‚Üê ADD THIS - don't exceed viewport */
  overflow-y: auto; /* ‚Üê ADD THIS - scroll if content is tall */
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

.modal-header {
  font-size: 18px;
  font-weight: 600;
  margin-bottom: 16px;
  color: #202223;
}

.modal-body {
  font-size: 14px;
  line-height: 1.6;
  color: #6d7175;
  margin-bottom: 24px;
  white-space: pre-line;
}

.modal-actions {
  display: flex;
  gap: 12px;
  justify-content: flex-end;
}

.modal-btn {
  padding: 10px 20px;
  border-radius: 6px;
  border: none;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s;
}

.modal-btn-primary {
  background: #008060;
  color: white;
}

.modal-btn-primary:hover {
  background: #006e52;
}

.modal-btn-secondary {
  background: #f1f2f3;
  color: #202223;
}

.modal-btn-secondary:hover {
  background: #e3e4e5;
}

.modal-btn-danger {
  background: #d72c0d;
  color: white;
}

.modal-btn-danger:hover {
  background: #c0280b;
}
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          "Helvetica Neue", Arial, sans-serif;
        background: #f6f6f7;
        color: #202223;
        line-height: 1.5;
      }

      /* Header */
      .app-header {
        background: white;
        border-bottom: 1px solid #e1e3e5;
        padding: 16px 24px;
        display: flex;
        align-items: center;
        gap: 12px;
      }
      .app-header h1 {
        font-size: 20px;
        font-weight: 600;
      }

      /* Tabs */
      .tabs {
        display: flex;
        gap: 4px;
        background: white;
        border-bottom: 1px solid #e1e3e5;
        padding: 0 24px;
      }
      .tab {
        padding: 12px 16px;
        cursor: pointer;
        border-bottom: 3px solid transparent;
        color: #6d7175;
        font-weight: 500;
        transition: all 0.2s;
      }
      .tab:hover {
        color: #202223;
        background: #f6f6f7;
      }
      .tab.active {
        color: #008060;
        border-bottom-color: #008060;
      }

      /* Main Container */
      .app-container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 24px;
      }

      /* View Sections */
      .view-section {
        display: none;
      }
      .view-section.active {
        display: block;
      }

      /* Page Headers */
      .page-header {
        margin-bottom: 24px;
      }
      .page-header h2 {
        font-size: 24px;
        font-weight: 600;
        margin-bottom: 8px;
      }
      .page-header p {
        color: #6d7175;
        font-size: 14px;
      }

      /* Cards */
      .card {
        background: white;
        border-radius: 8px;
        padding: 24px;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        margin-bottom: 16px;
      }
      .card h3 {
        font-size: 18px;
        font-weight: 600;
        margin-bottom: 16px;
      }

      /* Banner */
      .banner {
        background: #fff9c4;
        border: 1px solid #f9a825;
        border-radius: 8px;
        padding: 16px 20px;
        margin-bottom: 24px;
        display: flex;
        align-items: flex-start;
        gap: 12px;
      }
      .banner-icon {
        font-size: 24px;
        flex-shrink: 0;
      }
      .banner-content {
        flex: 1;
      }
      .banner-content h4 {
        font-size: 16px;
        font-weight: 600;
        margin-bottom: 8px;
      }
      .banner-content p {
        font-size: 14px;
        color: #5c5c5c;
        margin-bottom: 12px;
      }
      .banner-actions {
        display: flex;
        gap: 8px;
        flex-wrap: wrap;
      }

      /* Buttons */
      .btn {
       /* display: inline-block; */
        padding: 10px 20px;
        border-radius: 6px;
         border: none;
        font-size: 14px;
        font-weight: 500;
        cursor: pointer;
       /* border: none;
        text-decoration: none; */
        transition: all 0.2s;
      }
      .btn-primary {
        background: #008060;
        color: white;
      }
      .btn-primary:hover {
        background: #006e52;
      }
    .btn-secondary {
  background: #f1f2f3;
  color: #202223;
  border: none;
  padding: 10px 20px;
  border-radius: 6px;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s;
}

.btn-secondary:hover:not(:disabled) {
  background: #e3e4e5;
}

.btn-secondary:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}
      .btn-outline {
        background: transparent;
        color: #008060;
        border: 1px solid #008060;
      }
      .btn-outline:hover {
        background: #f0fdf9;
      }

      /* Form Elements */
      select,
      input[type="text"] {
        width: 100%;
        padding: 10px 12px;
        border: 1px solid #c9cccf;
        border-radius: 6px;
        font-size: 14px;
        font-family: inherit;
      }

      /* Toggle */
      .toggle {
        position: relative;
        display: inline-block;
        width: 44px;
        height: 24px;
      }
      .toggle input {
        opacity: 0;
        width: 0;
        height: 0;
      }
      .toggle-slider {
        position: absolute;
        cursor: pointer;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: #c9cccf;
        transition: 0.3s;
        border-radius: 24px;
      }
      .toggle-slider:before {
        position: absolute;
        content: "";
        height: 18px;
        width: 18px;
        left: 3px;
        bottom: 3px;
        background-color: white;
        transition: 0.3s;
        border-radius: 50%;
      }
      .toggle input:checked + .toggle-slider {
        background-color: #008060;
      }
      .toggle input:checked + .toggle-slider:before {
        transform: translateX(20px);
      }

      /* Settings Row */
      .setting-row {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 16px 0;
        border-bottom: 1px solid #e1e3e5;
      }
      .setting-row:last-child {
        border-bottom: none;
      }
      .setting-info h4 {
        font-size: 14px;
        font-weight: 500;
        margin-bottom: 4px;
      }
      .setting-info p {
        font-size: 13px;
        color: #6d7175;
      }

      /* Badge List */
      .badge-list {
        display: flex;
        flex-direction: column;
        gap: 8px;
      }
      .badge-item {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 12px;
        background: #f6f6f7;
        border-radius: 6px;
      }
      .badge-item-info {
        display: flex;
        align-items: center;
        gap: 12px;
      }
      .badge-preview {
        padding: 4px 8px;
        border-radius: 4px;
        font-size: 11px;
        font-weight: 600;
        text-transform: uppercase;
      }
      .badge-preview.hot {
        background: #ff4444;
        color: white;
      }
      .badge-preview.new {
        background: #4caf50;
        color: white;
      }
      .badge-preview.sale {
        background: #ff9800;
        color: white;
      }

      /* Banner */
      .banner {
        display: flex;
        align-items: flex-start;
        gap: 16px;
        background: #fff9c4;
        border: 1px solid #f9a825;
        border-radius: 8px;
        padding: 20px;
        margin-bottom: 24px;
      }
      .banner-icon {
        font-size: 24px;
        flex-shrink: 0;
      }
      .banner-content {
        flex: 1;
      }
      .banner-content h4 {
        margin: 0 0 8px 0;
        font-size: 16px;
        font-weight: 600;
      }
      .banner-content p {
        margin: 0 0 16px 0;
        color: #5c5c5c;
        line-height: 1.5;
      }
      .banner-actions {
        display: flex;
        gap: 12px;
      }

      /* Pricing Grid */
      .pricing-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 20px;
        margin-top: 24px;
      }
      .pricing-card {
        background: white;
        border: 2px solid #e1e3e5;
        border-radius: 12px;
        padding: 24px;
        text-align: center;
        transition: all 0.3s;
      }
      .pricing-card:hover {
        border-color: #008060;
        transform: translateY(-4px);
        box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
      }
      .pricing-card.featured {
        border-color: #008060;
        position: relative;
      }
      .pricing-badge {
        position: absolute;
        top: -12px;
        left: 50%;
        transform: translateX(-50%);
        background: #008060;
        color: white;
        padding: 4px 12px;
        border-radius: 12px;
        font-size: 12px;
        font-weight: 600;
      }
      .pricing-card h4 {
        font-size: 24px;
        margin-bottom: 8px;
      }
      .pricing-price {
        font-size: 48px;
        font-weight: 700;
        color: #008060;
        margin: 16px 0;
      }
      .pricing-price span {
        font-size: 24px;
        color: #6d7175;
      }
      .pricing-features {
        list-style: none;
        margin: 24px 0;
        text-align: left;
      }
      .pricing-features li {
        padding: 8px 0;
        display: flex;
        align-items: center;
        gap: 8px;
      }
      .pricing-features li:before {
        content: "‚úì";
        color: #008060;
        font-weight: bold;
      }

      /* FAQ */
      .faq-item {
        border-bottom: 1px solid #e1e3e5;
        padding: 16px 0;
      }
      .faq-item:last-child {
        border-bottom: none;
      }
      .faq-question {
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 8px 0;
      }
      .faq-question:hover {
        color: #008060;
      }
      .faq-icon {
        transition: transform 0.3s;
      }
      .faq-icon.open {
        transform: rotate(180deg);
      }
      .faq-answer {
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.3s;
        padding: 0;
        color: #6d7175;
        font-size: 14px;
        line-height: 1.6;
      }
      .faq-answer.open {
        max-height: 500px;
        padding: 12px 0;
      }

      /* Contact Grid */
      .contact-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 16px;
        margin-top: 20px;
      }
      .contact-card {
        background: #f6f6f7;
        padding: 20px;
        border-radius: 8px;
        text-align: center;
      }
      .contact-icon {
        font-size: 32px;
        margin-bottom: 12px;
      }
      .contact-card h4 {
        font-size: 16px;
        margin-bottom: 8px;
      }
      .contact-card p {
        font-size: 14px;
        color: #6d7175;
        margin-bottom: 12px;
      }

      /* Loading & Messages */
      .loading {
        text-align: center;
        padding: 40px;
        color: #6d7175;
      }
      .error {
        background: #ffebee;
        border: 1px solid #ef5350;
        color: #c62828;
        padding: 12px 16px;
        border-radius: 6px;
        margin-bottom: 16px;
      }
      .success {
        background: #e8f5e9;
        border: 1px solid #66bb6a;
        color: #2e7d32;
        padding: 12px 16px;
        border-radius: 6px;
        margin-bottom: 16px;
      }
      /* Mobile responsiveness - force override inline styles */
      @media (max-width: 430px) {
        /* Container */
        #products-list {
          padding: 8px !important;
        }

        /* Each product card */
        .badge-item {
          padding: 12px !important;
          margin-bottom: 12px !important;
        }

        /* Main flex container - FORCE vertical stack */
        .badge-item > div:first-child {
          display: flex !important;
          flex-direction: column !important;
          gap: 12px !important;
          align-items: flex-start !important;
        }

        /* Image + Info container */
        .badge-item > div:first-child > div:first-child {
          display: flex !important;
          flex-direction: row !important;
          width: 100% !important;
          gap: 12px !important;
        }

        /* Product info section */
        .badge-item > div:first-child > div:nth-child(2) {
          flex: 1 !important;
          min-width: 0 !important;
        }

        /* Dropdown & Preview container - FORCE vertical stack */
        .badge-item > div:last-child {
          display: flex !important;
          flex-direction: column !important;
          width: 100% !important;
          gap: 10px !important;
          margin-top: 12px !important;
        }

        /* Dropdown select - full width */
        .badge-item select {
          width: 100% !important;
          padding: 10px !important;
          font-size: 15px !important;
        }

        /* Preview button - full width */
        .badge-item button {
          width: 100% !important;
          padding: 10px 16px !important;
          font-size: 15px !important;
        }

        /* Product title */
        .badge-item > div > div > div:first-child {
          font-size: 15px !important;
          white-space: normal !important;
          overflow: visible !important;
        }
      }
    </style>
  </head>
  <body>
    <!-- App Header -->
    <div class="app-header">
      <span style="font-size: 24px">üìõ</span>
      <h1>Variant Badges</h1>
    </div>

    <!-- Tab Navigation -->
    <div class="tabs">
      <div class="tab active" onclick="switchTab('manage')">Manage Badges</div>
      <div class="tab" onclick="switchTab('settings')">Settings</div>
      <div class="tab" onclick="switchTab('plans')">Plans</div>
      <div class="tab" onclick="switchTab('help')">Help</div>
    </div>

    <div class="app-container">
  <!-- Onboarding Banner -->
  <div id="setup-banner" style="display: none">
    <div class="banner">
      <div class="banner-icon">‚ö†Ô∏è</div>
      <div class="banner-content">
        <h4>Complete Setup (30 seconds)</h4>
        <p>
          Badges are ready! Add them to your theme to make them visible to
          customers:
        </p>
        
        <!-- ADD THIS ORDERED LIST -->
        <ol style="margin: 12px 0 20px 20px; padding: 0; line-height: 1.8; color: #333; text-align: left;">
          <li>Click <strong>"Open Theme Editor"</strong> below</li>
          <li>Click <strong>"Add section"</strong> under Template</li>
          <li>Find and click <strong>"Variant Badges"</strong> under Apps</li>
          <li>This will create a new section as "Apps" and add "Variant Badges" block under it</li>
          <li>Click <strong>"Save"</strong> - Done! ‚úÖ</li>
        </ol>
        
        <div class="banner-actions">
          <button class="btn btn-primary" onclick="openThemeEditor()">
            üé® Open Theme Editor
          </button>
          <button class="btn btn-outline" onclick="dismissBanner()">
            Dismiss
          </button>
        </div>
      </div>
    </div>
  </div>

      <!-- MANAGE BADGES VIEW -->
<div id="manage-view" class="view-section active">
  <div class="page-header">
    <h2>Manage Badges</h2>
    <p>Assign HOT, NEW, and SALE badges to product variants</p>
  </div>

  <!-- Warning when no option selected -->
  <div id="no-option-warning" class="card" style="display: none; background: #fff4e5; border-left: 4px solid #ff9800; padding: 16px;">
    <p style="margin: 0;">‚ö†Ô∏è Please select an option type in the <a href="#" onclick="switchTab('settings'); return false;" style="color: #008060; font-weight: 600;">Settings tab</a> before assigning badges.</p>
  </div>

  <!-- Products list container -->
  <div id="products-list-container" style="display: none;">
    <div class="card">
      <p id="option-type-label" style="margin-bottom: 16px; color: #6d7175; font-weight: 500;"></p>
      
      <!-- Search Box -->
      <div style="margin-bottom: 20px;">
        <input 
          type="text" 
          id="product-search" 
          placeholder="üîç Search products by name..." 
          style="width: 100%; max-width: 400px; padding: 10px 12px; border: 1px solid #c9cccf; border-radius: 6px; font-size: 14px;"
          onkeyup="handleProductSearch(event)"
        >
        <button onclick="clearSearch()" style="margin-left: 8px; padding: 10px 16px; background: #f1f2f3; border: none; border-radius: 6px; cursor: pointer; font-size: 14px;">
          Clear
        </button>
      </div>

      <!-- Products List -->
      <div id="products-list"></div>

      <!-- Pagination Controls -->
      <div id="pagination-controls" style="margin-top: 20px; display: none; align-items: center; justify-content: space-between; padding: 16px; background: #f9fafb; border-radius: 6px;">
        <div id="pagination-info" style="color: #6d7175; font-size: 14px;">
          <!-- Shows: Products 1-20 of 147 -->
        </div>
        <div style="display: flex; gap: 8px; align-items: center;">
          <button id="prev-page" onclick="goToPreviousPage()" class="btn btn-secondary" disabled style="padding: 8px 16px;">
            ‚Üê Previous
          </button>
          <span id="page-numbers" style="color: #6d7175; font-size: 14px; margin: 0 8px;">
            <!-- Page 1 of 5 -->
          </span>
          <button id="next-page" onclick="goToNextPage()" class="btn btn-secondary" style="padding: 8px 16px;">
            Next ‚Üí
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

      <!-- SETTINGS VIEW -->
      <div id="settings-view" class="view-section">
        <div class="page-header">
          <h2>Settings</h2>
          <p>Configure your badge display preferences</p>
        </div>

        <div class="card">
          <h3>Badge Display</h3>

          <div class="setting-row">
            <div class="setting-info">
              <h4>Enable Badge Display</h4>
              <p>Badges appear on variant swatches when enabled</p>
            </div>
            <label class="toggle">
              <input type="checkbox" id="enable-display" checked />
              <span class="toggle-slider"></span>
            </label>
          </div>

          <div class="setting-row">
            <div class="setting-info">
              <h4>Select variant type you want to apply badges to:</h4>
              <p>
                Choose which product option (Color, Size, etc.) will display
                badges
              </p>
            </div>
            <select id="option-type" style="width: 200px">
              <option value="">Select an option type...</option>
            </select>
          </div>
<button class="btn btn-primary" onclick="saveSettings()" style="margin-top: 18px;">
            Save Settings
          </button>
        </div>
      </div>

      <!-- PLANS VIEW -->
      <div id="plans-view" class="view-section">
        <div class="page-header">
          <h2>Plans & Pricing</h2>
          <p>Choose the plan that fits your store</p>
        </div>

        <div class="card">
          <div class="pricing-grid">
            <div class="pricing-card">
              <h4>Free</h4>
              <div class="pricing-price">$0<span>/mo</span></div>
              <ul class="pricing-features">
                <li>Manual badge assignment</li>
                <li>HOT and NEW badges</li>
                <li>Up to 50 products</li>
                <li>Email support</li>
              </ul>
              <button class="btn btn-outline" style="width: 100%">
                Current Plan
              </button>
            </div>

            <div class="pricing-card featured">
              <div class="pricing-badge">Most Popular</div>
              <h4>Pro</h4>
              <div class="pricing-price">$9<span>/mo</span></div>
              <ul class="pricing-features">
                <li>Everything in Free</li>
                <li>Auto SALE badge on discounts</li>
                <li>Unlimited products</li>
                <li>Priority support</li>
                <li>Custom badge styles</li>
              </ul>
              <button
                class="btn btn-primary"
                style="width: 100%"
                onclick="upgradePlan('pro')"
              >
                Upgrade to Pro
              </button>
            </div>

            <div class="pricing-card">
              <h4>Enterprise</h4>
              <div class="pricing-price">$29<span>/mo</span></div>
              <ul class="pricing-features">
                <li>Everything in Pro</li>
                <li>Custom badge text</li>
                <li>A/B testing</li>
                <li>Analytics dashboard</li>
                <li>Dedicated account manager</li>
              </ul>
              <button
                class="btn btn-outline"
                style="width: 100%"
                onclick="upgradePlan('enterprise')"
              >
                Contact Sales
              </button>
            </div>
          </div>
        </div>
      </div>
<!-- HELP VIEW -->
<div id="help-view" class="view-section">
  <div class="page-header">
    <h2>Help & Support</h2>
    <p>Find answers to common questions and get assistance</p>
  </div>

  <!-- Theme Compatibility Notice -->
  <div class="card">
    <h3>Theme Compatibility</h3>
    <div style="background: #fff4e5; border-left: 4px solid #ff9800; padding: 16px; margin-bottom: 16px; border-radius: 4px;">
      <strong>‚ÑπÔ∏è Important:</strong> Variant Badges works with themes that display variant options as swatches or radio buttons.
    </div>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px;">
      <div>
        <h4 style="color: #008060; margin-bottom: 12px;">‚úÖ Supported Themes</h4>
        <ul style="list-style: none; padding: 0; line-height: 1.8;">
          <li>‚úì Dawn (Shopify's default theme)</li>
          <li>‚úì Sense</li>
          <li>‚úì Craft</li>
          <li>‚úì Refresh</li>
          <li>‚úì Most modern Shopify 2.0 themes</li>
        </ul>
      </div>
      
      <div>
        <h4 style="color: #d72c0d; margin-bottom: 12px;">‚ö†Ô∏è Not Yet Supported</h4>
        <ul style="list-style: none; padding: 0; line-height: 1.8;">
          <li>‚úó Themes using dropdown variant selectors</li>
          <li>‚úó Debut theme (older theme)</li>
          <li>‚úó Brooklyn theme (older theme)</li>
          <li>‚úó Horizon theme (incompatible button structure)</li>
        </ul>
        <p style="margin-top: 12px; font-size: 13px; color: #6d7175;">
          <strong>Note:</strong> Dropdown support is planned for v1.1
        </p>
      </div>
    </div>
    
    <div style="margin-top: 20px; padding: 12px; background: #f6f6f7; border-radius: 4px;">
      <strong>How to check if your theme is compatible:</strong>
      <p style="margin: 8px 0 0 0; color: #6d7175;">
        If your product page shows variant options (like colors or sizes) as clickable swatches or buttons, badges will work perfectly. If variants appear in a dropdown menu, they won't display in this version.
      </p>
    </div>
  </div>

  <div class="card">
    <h3>Need Assistance?</h3>
    <div class="contact-grid">
      <!-- Email Support -->
      <div class="contact-card">
        <div class="contact-icon">üìß</div>
        <h4>Email Support</h4>
        <p>Send us a detailed message</p>
        <button
          class="btn btn-primary"
          onclick="window.location.href='mailto:shopifyapps15@gmail.com'"
        >
          Email Us
        </button>
        <p style="margin-top: 8px; font-size: 13px; color: #6d7175;">shopifyapps15@gmail.com</p>
      </div>

      <!-- Documentation -->
      <div class="contact-card">
        <div class="contact-icon">üìö</div>
        <h4>Documentation</h4>
        <p>Setup guides and tutorials</p>
        <button
          class="btn btn-secondary"
          onclick="window.open('/privacy-policy', '_blank')"
        >
          View Docs
        </button>
      </div>
    </div>
  </div>

  <div class="card">
    <h3>Frequently Asked Questions</h3>

    <!-- Setup & Installation -->
    <div class="faq-item">
      <div class="faq-question" onclick="toggleFaq(this)">
        <span>How do I add badges to my theme?</span>
        <span class="faq-icon">‚ñº</span>
      </div>
      <div class="faq-answer">
        1. Click "Open Theme Editor" from the banner (or go to Online Store ‚Üí Themes ‚Üí Customize)<br />
        2. Navigate to your product page template<br />
        3. In the left sidebar, click "Add section" or "Add block"<br />
        4. Search for "Variant Badges" under the Apps section<br />
        5. Drag it into your product template where you want badges to appear<br />
        6. Click "Save" - badges will now show on your storefront!
      </div>
    </div>

    <div class="faq-item">
      <div class="faq-question" onclick="toggleFaq(this)">
        <span>Do badges work on all themes?</span>
        <span class="faq-icon">‚ñº</span>
      </div>
      <div class="faq-answer">
        Yes! Our app uses Shopify's Theme App Extension technology, which works universally on all themes including Dawn, Debut, Sense, and custom themes. You don't need to edit any theme code.
      </div>
    </div>

    <!-- Badge Assignment -->
    <div class="faq-item">
      <div class="faq-question" onclick="toggleFaq(this)">
        <span>Can I assign badges to specific sizes or colors?</span>
        <span class="faq-icon">‚ñº</span>
      </div>
      <div class="faq-answer">
        Yes! Go to Settings and choose which option type (Color, Size, Material, etc.) you want to display badges on. Then in Manage Badges, assign badges to specific option values like "Black", "Large", or "Cotton".
      </div>
    </div>

    <div class="faq-item">
      <div class="faq-question" onclick="toggleFaq(this)">
        <span>Can I assign badges to all variants at once?</span>
        <span class="faq-icon">‚ñº</span>
      </div>
      <div class="faq-answer">
        Absolutely! When you assign a badge to "Black", it automatically applies to ALL variants with that option value (Black/Small, Black/Medium, Black/Large, etc.). This option-level assignment saves you from clicking dozens of times and makes badge management much faster.
      </div>
    </div>

    <div class="faq-item">
      <div class="faq-question" onclick="toggleFaq(this)">
        <span>How do badges work with products that have multiple options?</span>
        <span class="faq-icon">‚ñº</span>
      </div>
      <div class="faq-answer">
        If your product has Color, Size, and Material options, you choose ONE option type in Settings to display badges on. For example, if you select "Color", badges will appear on color swatches (Black, Red, Blue) but not on size or material selectors. This prevents badge clutter and keeps your product pages clean.
      </div>
    </div>

    <!-- Badge Types -->
    <div class="faq-item">
      <div class="faq-question" onclick="toggleFaq(this)">
        <span>What's the difference between HOT, NEW, and SALE badges?</span>
        <span class="faq-icon">‚ñº</span>
      </div>
      <div class="faq-answer">
        <strong>üî• HOT</strong> (red badge) - Use for trending, popular, or bestselling items to create urgency<br />
        <strong>‚ú® NEW</strong> (green badge) - Highlight recently added products or new arrivals<br />
        <strong>üí∞ SALE</strong> (orange badge) - Mark discounted items or special promotions<br /><br />
        You can assign these badges to any variant option based on your merchandising strategy.
      </div>
    </div>

    <!-- Troubleshooting -->
    <div class="faq-item">
      <div class="faq-question" onclick="toggleFaq(this)">
        <span>Why aren't my badges showing on the storefront?</span>
        <span class="faq-icon">‚ñº</span>
      </div>
      <div class="faq-answer">
        Check these common issues:<br />
        1. <strong>App block not added:</strong> Check the banner at the top - if it shows, you need to add the app block to your theme<br />
        2. <strong>Display disabled:</strong> Go to Settings and make sure "Enable badge display" is checked<br />
        3. <strong>Wrong option type:</strong> Verify you've selected the correct option type (e.g., badges assigned to Color but Size is selected in Settings)<br />
        4. <strong>No badges assigned:</strong> Make sure you've actually assigned badges in the Manage Badges tab<br />
        5. <strong>Cache:</strong> Try viewing in incognito mode or clearing your browser cache
      </div>
    </div>

    <div class="faq-item">
      <div class="faq-question" onclick="toggleFaq(this)">
        <span>Can I preview badges before they go live?</span>
        <span class="faq-icon">‚ñº</span>
      </div>
      <div class="faq-answer">
        Yes! Click the "Preview ‚Üí" button next to any product in the Manage Badges tab. This opens your product page so you can see exactly how badges will look on your live storefront before customers see them.
      </div>
    </div>

    <!-- Data & Privacy -->
    <div class="faq-item">
      <div class="faq-question" onclick="toggleFaq(this)">
        <span>What happens to my badges if I uninstall the app?</span>
        <span class="faq-icon">‚ñº</span>
      </div>
      <div class="faq-answer">
        All badge assignments and settings are automatically deleted when you uninstall the app. Your product data remains completely unchanged - we only store badge assignments, not your actual product information. You can reinstall anytime and start fresh.
      </div>
    </div>

    <div class="faq-item">
      <div class="faq-question" onclick="toggleFaq(this)">
        <span>Do you store customer data?</span>
        <span class="faq-icon">‚ñº</span>
      </div>
      <div class="faq-answer">
        No. We don't collect, store, or access any customer personal information (names, emails, addresses, etc.). We only work with product variant information to display badges. See our <a href="/privacy-policy" target="_blank" style="color: #008060;">Privacy Policy</a> for details.
      </div>
    </div>

  </div>

  <!-- Contact Footer -->
  <div class="card" style="text-align: center; background: #f6f6f7;">
    <h4 style="margin-bottom: 8px;">Still need help?</h4>
    <p style="color: #6d7175; margin-bottom: 12px;">We're here to assist you!</p>
    <p>
      Email us at <a href="mailto:shopifyapps15@gmail.com" style="color: #008060; text-decoration: none; font-weight: 600;">shopifyapps15@gmail.com</a>
    </p>
    <p style="font-size: 13px; color: #999; margin-top: 8px;">We typically respond within 24 hours</p>
  </div>
</div>

    <script>
      // Custom modal functions
function showAlert(message, title = "Notice") {
  const modal = document.getElementById('custom-modal');
  const titleEl = document.getElementById('modal-title');
  const messageEl = document.getElementById('modal-message');
  const actionsEl = document.getElementById('modal-actions');
  
  titleEl.textContent = title;
  messageEl.textContent = message;
  actionsEl.innerHTML = '<button class="modal-btn modal-btn-primary" onclick="closeModal()">OK</button>';
  
  modal.classList.add('active');
}
// Welcome modal functions
function showWelcomeModal() {
  const modal = document.getElementById('welcome-modal');
  if (modal) {
    modal.classList.add('active');
    // Mark as seen
    localStorage.setItem('vb_welcome_shown_' + SHOP, 'true');
  }
}

function closeWelcomeModal() {
  const modal = document.getElementById('welcome-modal');
  if (modal) {
    modal.classList.remove('active');
  }
}

function openThemeEditorFromModal() {
  const shopHandle = SHOP.replace('.myshopify.com', '');
  
  // Opens theme editor on product template with apps sidebar open
  const url = `https://admin.shopify.com/store/${shopHandle}/themes/current/editor?template=product`;
  
  window.open(url, '_blank');
}
// Check if first time user
function checkFirstTimeUser() {
  const hasSeenWelcome = localStorage.getItem('vb_welcome_shown_' + SHOP);
  
  if (!hasSeenWelcome) {
    // Show welcome modal after short delay
    setTimeout(() => {
      showWelcomeModal();
    }, 800);
  }
}

// Initialize on page load
if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', checkFirstTimeUser);
} else {
  checkFirstTimeUser();
}

function showConfirm(message, title = "Confirm") {
  return new Promise((resolve) => {
    const modal = document.getElementById('custom-modal');
    const titleEl = document.getElementById('modal-title');
    const messageEl = document.getElementById('modal-message');
    const actionsEl = document.getElementById('modal-actions');
    
    titleEl.textContent = title;
    messageEl.textContent = message;
    actionsEl.innerHTML = `
      <button class="modal-btn modal-btn-secondary" onclick="closeModal(false)">Cancel</button>
      <button class="modal-btn modal-btn-danger" onclick="closeModal(true)">Continue</button>
    `;
    
    modal.classList.add('active');
    
    window.modalResolve = resolve;
  });
}

function closeModal(result) {
  const modal = document.getElementById('custom-modal');
  modal.classList.remove('active');
  
  if (window.modalResolve) {
    window.modalResolve(result || false);
    window.modalResolve = null;
  }
}
      // ============================================
      // CONFIGURATION
      // ============================================

      const SHOP = "{{SHOP}}";
      const API_KEY = "{{SHOPIFY_API_KEY}}";

      let sessionToken = null;
      let tokenExpiry = null;

      console.log("‚úÖ App loaded - Secure JWT authentication");

      // ============================================
      // TAB SWITCHING
      // ============================================

      function switchTab(tabName) {
        // Update tab UI
        document.querySelectorAll(".tab").forEach((tab) => {
          tab.classList.remove("active");
        });
        event.target.classList.add("active");

        // Update view
        document.querySelectorAll(".view-section").forEach((view) => {
          view.classList.remove("active");
        });
        document.getElementById(`${tabName}-view`).classList.add("active");

        // Load data for view
        if (tabName === "manage") {
          // Always reload products when switching to this tab (settings may have changed)
          console.log("üîÑ Loading products for Manage Badges tab");
          loadProducts();
        } else if (tabName === "settings" && !window.settingsLoaded) {
          loadSettings();
        }
      }

      // ============================================
      // JWT TOKEN MANAGEMENT
      // ============================================

      /**
       * Fetch a fresh session token from the server
       * Token is valid for 8 hours
       */
      async function getSessionToken(force = false) {
        // Return cached token if still valid
        if (!force && sessionToken && tokenExpiry && Date.now() < tokenExpiry) {
          return sessionToken;
        }

        try {
          console.log("üîë Fetching session token...");
          const response = await fetch(`/auth/token?shop=${SHOP}`);

          if (!response.ok) {
            const error = await response.json();
            console.error("‚ùå Token fetch failed:", error);

            // If not authenticated, redirect to OAuth
            if (response.status === 401 && error.redirect) {
              window.top.location.href = error.redirect;
              return null;
            }

            throw new Error(`Token fetch failed: ${response.status}`);
          }

          const data = await response.json();
          sessionToken = data.token;
          tokenExpiry = Date.now() + data.expiresIn * 1000 - 60 * 1000; // Expire 1 min early

          console.log("‚úÖ Session token obtained");
          return sessionToken;
        } catch (error) {
          console.error("‚ùå Failed to get session token:", error);
          throw error;
        }
      }

      /**
       * Make authenticated API calls with automatic token refresh
       */
      async function authenticatedFetch(url, options = {}, retryCount = 0) {
        try {
          // Get valid token
          const token = await getSessionToken();
          if (!token) {
            throw new Error("No session token available");
          }

          // Add Authorization header
          const headers = {
            "Content-Type": "application/json",
            Authorization: `Bearer ${token}`,
            ...options.headers,
          };

          const response = await fetch(url, {
            ...options,
            headers,
          });

          // If 401 and we haven't retried, get fresh token and retry
          if (response.status === 401 && retryCount === 0) {
            console.log("üîÑ Token expired, refreshing...");
            await getSessionToken(true); // Force refresh
            return authenticatedFetch(url, options, retryCount + 1); // Retry once
          }

          return response;
        } catch (error) {
          console.error("‚ùå Authenticated fetch failed:", error);
          throw error;
        }
      }

      // ============================================
      // API CALLS
      // ============================================

      // ============================================
      // ONBOARDING BANNER
      // ============================================

      async function checkSetupStatus() {
        try {
          const response = await authenticatedFetch(
            `/api/setup/status?shop=${SHOP}`
          );

          if (!response.ok) {
            console.log("Setup check returned:", response.status);
            return;
          }

          const data = await response.json();

          if (!data.enabled) {
            document.getElementById("setup-banner").style.display = "block";
          }
        } catch (error) {
          console.log("Setup check skipped:", error.message);
        }
      }

      function openThemeEditor() {
        const url = `https://${SHOP}/admin/themes/current/editor?template=product`;
        window.open(url, "_blank");
      }

      function dismissBanner() {
        document.getElementById("setup-banner").style.display = "none";
      }

      checkSetupStatus();

// ============================================
// BADGE MANAGEMENT WITH PAGINATION
// ============================================

// Pagination state
let currentPage = 1;
let totalPages = 1;
let currentSearch = '';
const itemsPerPage = 20;
let isLoadingProducts = false;

// Load products with pagination
async function loadProducts(page = 1, search = '') {
  if (isLoadingProducts) {
    console.log('‚è≥ Already loading products, skipping...');
    return;
  }

  try {
    isLoadingProducts = true;
    console.log(`üì¶ Loading products - Page ${page}, Search: "${search}"`);

    // First, check if option type is selected
    const settingsResponse = await authenticatedFetch(`/api/settings`);
    if (!settingsResponse.ok) {
      throw new Error("Failed to load settings");
    }

    const settings = await settingsResponse.json();
    const selectedOption = settings.selectedOption;

    if (!selectedOption) {
      document.getElementById("no-option-warning").style.display = "block";
      document.getElementById("products-list-container").style.display = "none";
      window.productsLoaded = true;
      isLoadingProducts = false;
      return;
    }

    // Hide warning, show products list
    document.getElementById("no-option-warning").style.display = "none";
    document.getElementById("products-list-container").style.display = "block";
    document.getElementById("option-type-label").textContent = 
      `Assigning badges to: ${selectedOption} variants`;

    // Show loading state
    document.getElementById("products-list").innerHTML =
      '<div class="loading">Loading products...</div>';

    // Fetch paginated products using NEW endpoint
    const response = await authenticatedFetch(
      `/api/badges/paginated?page=${page}&limit=${itemsPerPage}&search=${encodeURIComponent(search)}`
    );

    if (!response.ok) {
      throw new Error(`HTTP ${response.status}`);
    }

    const rawData = await response.json();
    
    // Transform data to match renderAllProducts() expectations
    const transformedData = transformProductsData(rawData);
    
    // Update pagination state
    currentPage = rawData.currentPage;
    totalPages = rawData.totalPages;
    currentSearch = search;

    // Render products using EXISTING function
    renderAllProducts(transformedData);

    // Update pagination controls
    updatePaginationControls(rawData);

    window.productsLoaded = true;
    console.log(`‚úÖ Products loaded: ${rawData.products.length} of ${rawData.totalProducts}`);
  } catch (error) {
    console.error("Failed to load products:", error);
    document.getElementById("products-list").innerHTML =
      '<div class="error">Failed to load products. Please try again.</div>';
  } finally {
    isLoadingProducts = false;
  }
}

// Transform pagination data to match existing renderAllProducts() format
function transformProductsData(rawData) {
  const { products, badges, selectedOption } = rawData;
  
  const transformedProducts = products.map(product => {
    // Find the selected option (e.g., "Color")
    const selectedOptionData = product.options.find(opt => opt.name === selectedOption);
    
    if (!selectedOptionData) {
      return {
        ...product,
        options: []
      };
    }

    // Group variants by option value
    const optionGroups = {};
    
    product.variants.forEach(variant => {
      // Find the value for the selected option
      const selectedOpt = variant.selectedOptions?.find(opt => opt.name === selectedOption);
      
      if (selectedOpt) {
        const optionValue = selectedOpt.value;
        
        if (!optionGroups[optionValue]) {
          optionGroups[optionValue] = {
            optionValue: optionValue,
            variantIds: [],
            variantCount: 0,
            imageUrl: variant.image?.url || product.image
          };
        }
        
        optionGroups[optionValue].variantIds.push(variant.id);
        optionGroups[optionValue].variantCount++;
      }
    });

    // Convert to options array with badge info
    const options = Object.values(optionGroups).map(group => {
      // Check if this option value has a badge
      const badgeKey = `${product.id}_${group.optionValue}`;
      const badgeInfo = badges[badgeKey];
      
      return {
        optionValue: group.optionValue,
        variantCount: group.variantCount,
        variantIds: group.variantIds,
        imageUrl: group.imageUrl,
        badge: badgeInfo ? badgeInfo.badge_type : 'none'
      };
    });

    return {
      ...product,
      options: options,
      imageUrl: product.image
    };
  });

  return {
    products: transformedProducts,
    selectedOption: selectedOption,
    shop: SHOP
  };
}

// Update pagination controls
function updatePaginationControls(data) {
  const { currentPage, totalPages, totalProducts, limit } = data;
  
  // Calculate display range
  const start = (currentPage - 1) * limit + 1;
  const end = Math.min(currentPage * limit, totalProducts);
  
  // Update info text
  document.getElementById("pagination-info").textContent = 
    totalProducts > 0 ? `Products ${start}-${end} of ${totalProducts}` : 'No products found';

  // Update page numbers
  document.getElementById("page-numbers").textContent = 
    totalPages > 1 ? `Page ${currentPage} of ${totalPages}` : '';

  // Update buttons
  const prevBtn = document.getElementById("prev-page");
  const nextBtn = document.getElementById("next-page");

  prevBtn.disabled = currentPage <= 1;
  nextBtn.disabled = currentPage >= totalPages;

  // Show/hide pagination if needed
  const paginationDiv = document.getElementById("pagination-controls");
  paginationDiv.style.display = totalPages > 1 ? 'flex' : 'none';
}

// Navigation functions
function goToPreviousPage() {
  if (currentPage > 1 && !isLoadingProducts) {
    loadProducts(currentPage - 1, currentSearch);
  }
}

function goToNextPage() {
  if (currentPage < totalPages && !isLoadingProducts) {
    loadProducts(currentPage + 1, currentSearch);
  }
}

// Search handling with debounce
let searchTimeout;
function handleProductSearch(event) {
  clearTimeout(searchTimeout);
  const searchTerm = event.target.value.trim();
  
  // Debounce search - wait 500ms after user stops typing
  searchTimeout = setTimeout(() => {
    loadProducts(1, searchTerm); // Reset to page 1 on new search
  }, 500);
}

function clearSearch() {
  document.getElementById("product-search").value = '';
  loadProducts(1, ''); // Reset to page 1, no search
}
      function renderAllProducts(data) {
        const container = document.getElementById("products-list");

        if (!data.products || data.products.length === 0) {
          container.innerHTML =
            '<p style="color: #6d7175;">No products found with the selected option type.</p>';
          return;
        }

        let html = "";

        data.products.forEach((product) => {
          product.options.forEach((option) => {
            const currentBadge = option.badge || "none";
            console.log(
              "DEBUG: Rendering",
              option.optionValue,
              "- Badge from API:",
              option.badge,
              "- Using:",
              currentBadge
            );
            const productUrl = `https://${data.shop}/products/${product.handle}`;

            html += `
            <div class="badge-item" style="padding: 16px;margin-bottom: 24px;">
              <div style="display: flex; align-items: center; gap: 16px; flex: 1;">
                <!-- Product Image -->
                <div style="flex-shrink: 0;">
                  <img src="${
                    option.imageUrl ||
                    product.imageUrl ||
                    "https://via.placeholder.com/60"
                  }" 
                       alt="${product.title}" 
                       style="width: 60px; height: 60px; object-fit: cover; border-radius: 8px; border: 1px solid #e1e3e5;">
                </div>
                
                <!-- Product Info -->
                <div style="flex: 1; min-width: 0;">
                  <div style="font-weight: 600; font-size: 15px; margin-bottom: 4px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">
                    ${product.title}
                  </div>
                  <div style="color: #6d7175; font-size: 13px;">
                    ${data.selectedOption}: <strong>${
              option.optionValue
            }</strong> (${option.variantCount} variant${
              option.variantCount > 1 ? "s" : ""
            })
                  </div>
                  ${
                    currentBadge !== "none"
                      ? `<span class="badge-preview ${currentBadge}" style="margin-top: 6px; display: inline-block;">${currentBadge.toUpperCase()}</span>`
                      : ""
                  }
                </div>
              </div>
              
              <!-- Badge Dropdown & Preview -->
              <div style="display: flex; align-items: center; gap: 12px;">
                <select onchange="saveBadge('${product.id}', '${
              option.optionValue
            }', this.value)" 
                        style="width: 150px;">
                  <option value="none" ${
                    currentBadge === "none" ? "selected" : ""
                  }>No Badge</option>
                  <option value="hot" ${
                    currentBadge === "hot" ? "selected" : ""
                  }>üî• HOT</option>
                  <option value="new" ${
                    currentBadge === "new" ? "selected" : ""
                  }>‚ú® NEW</option>
                </select>
                <a href="${productUrl}" target="_blank" class="btn btn-secondary" style="padding: 8px 12px; font-size: 13px; text-decoration: none;">
                  Preview ‚Üí
                </a>
              </div>
            </div>
          `;
          });
        });

        container.innerHTML = html;
      }

      async function saveBadge(productId, optionValue, badgeType) {
        try {
          console.log("üíæ Saving badge:", productId, optionValue, badgeType);

          const response = await authenticatedFetch("/api/badges", {
            method: "POST",
            body: JSON.stringify({
              productId,
              optionValue,
              badgeType,
            }),
          });

          if (response.ok) {
            console.log("‚úÖ Badge saved");
            // Refresh the products list to show updated badges
            loadProducts();
          } else {
            throw new Error(`HTTP ${response.status}`);
          }
        } catch (error) {
          console.error("Failed to save badge:", error);
          alert("Failed to save badge. Please try again.");
        }
      }

      // Load products on start
      loadProducts();

      // ============================================
      // SETTINGS
      // ============================================

async function loadSettings() {
  try {
    // Load available options first
    const optionsResponse = await authenticatedFetch(
      "/api/products/options?shop=" + SHOP
    );

    if (optionsResponse.ok) {
      const optionsData = await optionsResponse.json();
      const optionSelect = document.getElementById("option-type");
      optionSelect.innerHTML =
        '<option value="">Select an option type...</option>';

      optionsData.options.forEach((optionName) => {
        const opt = document.createElement("option");
        opt.value = optionName;
        opt.textContent = optionName;
        optionSelect.appendChild(opt);
      });
    }

    // Load saved settings
    const settingsResponse = await authenticatedFetch(
      "/api/settings?shop=" + SHOP
    );

    if (settingsResponse.ok) {
      const settings = await settingsResponse.json();

      // Store current settings globally for comparison
      window.currentSettings = {
        selectedOption: settings.selectedOption,
        enabled: settings.badgeDisplayEnabled
      };

      // Set option type dropdown
      if (settings.selectedOption) {
        document.getElementById("option-type").value = settings.selectedOption;
      }

      // Set enable toggle
      document.getElementById("enable-display").checked = 
        settings.badgeDisplayEnabled !== false;
    }
  } catch (error) {
    console.error("Failed to load settings:", error);
    alert("Failed to load settings");
  }
}
async function saveSettings() {
  try {
    const selectedOption = document.getElementById("option-type").value;
    const enabled = document.getElementById("enable-display").checked;

    if (!selectedOption) {
      showAlert("Please select an option type", "Missing Selection");
      return;
    }

    const currentOption = window.currentSettings?.selectedOption;

    // If option changed, show confirmation
    if (currentOption && currentOption !== selectedOption) {
      const confirmed = await showConfirm(
        `You are changing from "${currentOption}" to "${selectedOption}".\n\n` +
        `This will DELETE ALL existing badge assignments!\n\n` +
        `You will need to reassign badges after this change.\n\n` +
        `Do you want to continue?`,
        "‚ö†Ô∏è Warning: Changing Option Type"
      );

      if (!confirmed) {
        document.getElementById("option-type").value = currentOption;
        return;
      }
    }

    const response = await authenticatedFetch("/api/settings", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({
        selectedOption,
        enabled
      }),
    });

    if (!response.ok) {
      showAlert("Failed to save settings", "Error");
      return;
    }

    const data = await response.json();

    if (data.success) {
      window.currentSettings = { selectedOption, enabled };
      
      if (data.badgesDeleted) {
        showAlert(
          `All badge assignments have been removed.\n\n` +
          `Please reassign badges for the new option type in Manage Badges.`,
          "‚úÖ Settings Saved"
        );
      } else {
        showAlert("Settings saved successfully!", "‚úÖ Success");
      }
      
      try {
        const manageView = document.getElementById('manage-view');
        if (manageView && manageView.style.display !== 'none' && typeof loadBadges === 'function') {
          loadBadges();
        }
      } catch (reloadError) {
        console.log("Could not reload badges:", reloadError);
      }
    } else {
      showAlert("Failed to save settings", "Error");
    }
  } catch (error) {
    console.error("Save settings error:", error);
    showAlert("Error saving settings: " + error.message, "Error");
  }
}

      // ============================================
      // PLANS
      // ============================================

      function upgradePlan(plan) {
        if (plan === "enterprise") {
          switchTab("help");
        } else {
          alert(
            `Upgrade to ${plan} plan - Shopify billing integration coming soon!`
          );
        }
      }

      // ============================================
      // HELP
      // ============================================

      function toggleFaq(element) {
        const answer = element.nextElementSibling;
        const icon = element.querySelector(".faq-icon");

        answer.classList.toggle("open");
        icon.classList.toggle("open");
      }

      function openLiveChat() {
        alert(
          "Live chat integration coming soon! For now, please email support@variantbadges.com"
        );
      }
    </script>
    <!-- Custom Modal -->
<div id="custom-modal" class="modal-overlay">
  <div class="modal-content">
    <div class="modal-header" id="modal-title">Confirm</div>
    <div class="modal-body" id="modal-message"></div>
    <div class="modal-actions" id="modal-actions"></div>
  </div>
</div>
<!-- Custom Modal -->
<div id="custom-modal" class="modal-overlay">
  <div class="modal-content">
    <div class="modal-header" id="modal-title">Confirm</div>
    <div class="modal-body" id="modal-message"></div>
    <div class="modal-actions" id="modal-actions"></div>
  </div>
</div>
<!-- Welcome Modal (First-time Setup Guide) -->
<div id="welcome-modal" class="modal-overlay">
  <div class="modal-content" style="max-width: 700px;">
    <div class="modal-header" style="text-align: center;">
      üëã Welcome to Variant Badges!
    </div>
    <div class="modal-body" style="text-align: left;">
  <p style="margin: 0 0 12px 0; font-size: 15px; font-weight: 500;">Get your badges live in 3 easy steps:</p>
  
  <!-- Step 1: Theme Editor -->
  <div style="margin-bottom: 16px; padding: 16px; background: #f9fafb; border-radius: 8px;">
    <h4 style="margin: 0 0 8px 0; color: #202223; font-size: 14px; font-weight: 600;">
      üé® Step 1: Add App Block to Your Theme
    </h4>
    <ol style="color: #6d7175; margin: 0 0 10px 0; padding-left: 20px; font-size: 13px; line-height: 1.6;">
      <li>Click "Open Theme Editor" below</li>
      <li>Click "Add section" under Template in the left sidebar</li>
      <li>Find and click "Variant Badges" under Apps</li>
      <li>This will create a new section as "Apps" and add "Variant Badges" block under it</li>
      <li>Click "Save" - Done! ‚úÖ</li>
    </ol>
   <button class="btn btn-primary" onclick="openThemeEditorFromModal()" style="margin: 0 0 10px 0; padding: 10px 20px; display: inline-flex; align-items: center; justify-content: center; line-height: 1;">
  üìù Open Theme Editor
</button>
    <img src="/images/help/help-02-add-section.png" 
         alt="Theme Editor Screenshot" 
         style="width: 100%; border-radius: 6px; border: 1px solid #e1e3e5; box-shadow: 0 1px 3px rgba(0,0,0,0.1); display: block; margin: 0;">
  </div>
  
  <!-- Step 2: Settings -->
  <div style="margin-bottom: 16px; padding: 16px; background: #f9fafb; border-radius: 8px;">
    <h4 style="margin: 0 0 8px 0; color: #202223; font-size: 14px; font-weight: 600;">
      üìã Step 2: Choose Your Option Type
    </h4>
    <p style="color: #6d7175; margin: 0 0 10px 0; font-size: 13px; line-height: 1.6;">
      Go to <strong>Settings</strong> tab and select which product option (Color, Size, etc.) should display badges.
    </p>
    <img src="/images/appstore/02-settings.png" 
         alt="Settings Screenshot" 
         style="width: 100%; border-radius: 6px; border: 1px solid #e1e3e5; box-shadow: 0 1px 3px rgba(0,0,0,0.1); display: block; margin: 0;">
  </div>
  
  <!-- Step 3: Manage Badges -->
  <div style="margin-bottom: 12px; padding: 16px; background: #f9fafb; border-radius: 8px;">
    <h4 style="margin: 0 0 8px 0; color: #202223; font-size: 14px; font-weight: 600;">
      üè∑Ô∏è Step 3: Assign Badges to Products
    </h4>
    <p style="color: #6d7175; margin: 0 0 10px 0; font-size: 13px; line-height: 1.6;">
      Go to <strong>Manage Badges</strong> tab and assign HOT or NEW badges to specific product variants.
    </p>
    <img src="/images/appstore/01-manage-badges.png" 
         alt="Manage Badges Screenshot" 
         style="width: 100%; border-radius: 6px; border: 1px solid #e1e3e5; box-shadow: 0 1px 3px rgba(0,0,0,0.1); display: block; margin: 0;">
  </div>
  
<!-- Help section - centered text -->
<div style="background: #fff4e5; padding: 8px 12px; border-radius: 6px; border-left: 4px solid #ff9800; margin: 0; display: flex; align-items: center;">
  <p style="margin: 0; font-size: 13px; line-height: 1.4;">
    üí° <strong>Need help?</strong> Check the <a href="#" onclick="switchTab('help'); closeWelcomeModal(); return false;" style="color: #008060; text-decoration: underline;">Help tab</a> for detailed guides and support.
  </p>
</div>
</div>
    <div class="modal-actions" style="margin-top: 20px;">
      <button class="modal-btn modal-btn-primary" onclick="closeWelcomeModal()">
        ‚úÖ Get Started
      </button>
    </div>
  </div>
</div>
  </body>
</html>
